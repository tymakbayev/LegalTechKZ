"""
–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∞–≤–æ–≤–æ–π —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã –ù–ü–ê.

–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –ø–æ–ª–Ω–æ—Ç—ã –∞–Ω–∞–ª–∏–∑–∞.
"""

import os
import sys

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –∫–æ—Ä–Ω—é –ø—Ä–æ–µ–∫—Ç–∞
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))

from legaltechkz.expertise.legal_expertise_pipeline import LegalExpertisePipeline
from legaltechkz.models.model_router import ModelRouter


# –ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ù–ü–ê (–Ω–µ–±–æ–ª—å—à–æ–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
SAMPLE_NPA_TEXT = """
–ü–†–û–ï–ö–¢ –ó–ê–ö–û–ù–ê –†–ï–°–ü–£–ë–õ–ò–ö–ò –ö–ê–ó–ê–•–°–¢–ê–ù

–û –≤–Ω–µ—Å–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å–Ω—ã–µ –∞–∫—Ç—ã
–†–µ—Å–ø—É–±–ª–∏–∫–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º —Ü–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏–∏

–ì–ª–∞–≤–∞ 1. –û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è

–°—Ç–∞—Ç—å—è 1. –ü—Ä–µ–¥–º–µ—Ç —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è

–ù–∞—Å—Ç–æ—è—â–∏–π –ó–∞–∫–æ–Ω —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ü–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏–∏
–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Å–ª—É–≥ –∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞.

–°—Ç–∞—Ç—å—è 2. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è

1. –í –Ω–∞—Å—Ç–æ—è—â–µ–º –ó–∞–∫–æ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è:

1) —Ü–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è - –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ —Ü–∏—Ñ—Ä–æ–≤—É—é —Ñ–æ—Ä–º—É;

2) —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç - –¥–æ–∫—É–º–µ–Ω—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π —Ñ–æ—Ä–º–µ –±–µ–∑
–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –±—É–º–∞–∂–Ω–æ–º –Ω–æ—Å–∏—Ç–µ–ª–µ, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π
—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–¥–ø–∏—Å—å—é;

3) –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–∞—è —É—Å–ª—É–≥–∞ - –¥–µ–π—Å—Ç–≤–∏—è —É–ø–æ–ª–Ω–æ–º–æ—á–µ–Ω–Ω–æ–≥–æ –æ—Ä–≥–∞–Ω–∞ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–π –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü.

–°—Ç–∞—Ç—å—è 3. –ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è —É–ø–æ–ª–Ω–æ–º–æ—á–µ–Ω–Ω–æ–≥–æ –æ—Ä–≥–∞–Ω–∞

1. –£–ø–æ–ª–Ω–æ–º–æ—á–µ–Ω–Ω—ã–π –æ—Ä–≥–∞–Ω –≤ —Å—Ñ–µ—Ä–µ —Ü–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏–∏:

1) —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –æ–∫–∞–∑–∞–Ω–∏—è –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Å–ª—É–≥
–≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π —Ñ–æ—Ä–º–µ;

2) –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å –∑–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ–º –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ó–∞–∫–æ–Ω–∞;

3) –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–≤–æ–µ–π –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏.

2. –£–ø–æ–ª–Ω–æ–º–æ—á–µ–Ω–Ω—ã–π –æ—Ä–≥–∞–Ω –≤–ø—Ä–∞–≤–µ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –ø–æ–ª–Ω–æ–º–æ—á–∏—è –≤ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö.

–ì–ª–∞–≤–∞ 2. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Å–ª—É–≥

–°—Ç–∞—Ç—å—è 4. –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Å–ª—É–≥

1. –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π —Ñ–æ—Ä–º–µ —á–µ—Ä–µ–∑
–µ–¥–∏–Ω—ã–π –ø–æ—Ä—Ç–∞–ª –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Å–ª—É–≥.

2. –°—Ä–æ–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π —É—Å–ª—É–≥–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–æ–º
–æ–∫–∞–∑–∞–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —É—Å–ª—É–≥–∏.

3. –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –Ω–µ–ø–æ–ª–∞–¥–æ–∫ —Å—Ä–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–¥–ª–µ–Ω –Ω–∞ —Ä–∞–∑—É–º–Ω—ã–π —Å—Ä–æ–∫.

–°—Ç–∞—Ç—å—è 5. –ü—Ä–∞–≤–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Å–ª—É–≥ –∏–º–µ—é—Ç –ø—Ä–∞–≤–æ:

1) –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏;

2) –Ω–∞ –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –¥–æ–ª–∂–Ω–æ—Å—Ç–Ω—ã—Ö –ª–∏—Ü;

3) –Ω–∞ –∑–∞—â–∏—Ç—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–±—è–∑–∞–Ω—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è.

–°—Ç–∞—Ç—å—è 6. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å

–ó–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ó–∞–∫–æ–Ω–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç–Ω—ã–µ –ª–∏—Ü–∞ –Ω–µ—Å—É—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –†–µ—Å–ø—É–±–ª–∏–∫–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω.
"""


def example_full_expertise():
    """–ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–π –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã."""
    print("=" * 80)
    print("–ü–†–ò–ú–ï–†: –ö–û–ú–ü–õ–ï–ö–°–ù–ê–Ø –ü–†–ê–í–û–í–ê–Ø –≠–ö–°–ü–ï–†–¢–ò–ó–ê –ù–ü–ê")
    print("=" * 80)

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–µ–π
    api_keys = {
        "OpenAI": os.getenv("OPENAI_API_KEY"),
        "Anthropic": os.getenv("ANTHROPIC_API_KEY"),
        "Google": os.getenv("GOOGLE_API_KEY")
    }

    print("\nüîë –°—Ç–∞—Ç—É—Å API –∫–ª—é—á–µ–π:")
    for name, key in api_keys.items():
        status = "‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω" if key else "‚ùå –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
        print(f"  {name}: {status}")

    if not any(api_keys.values()):
        print("\n‚ö†Ô∏è  –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï: –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã API –∫–ª—é—á–∏!")
        print("   –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:")
        print("   - OPENAI_API_KEY")
        print("   - ANTHROPIC_API_KEY")
        print("   - GOOGLE_API_KEY")
        print("\n   –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ API...\n")

        # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
        demonstrate_structure_only()
        return

    # –°–æ–∑–¥–∞—ë–º pipeline —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º –º–æ–¥–µ–ª–µ–π
    pipeline = LegalExpertisePipeline()

    # –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–ª–Ω—É—é —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—É
    print("\nüöÄ –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã...\n")

    try:
        report = pipeline.conduct_full_expertise(SAMPLE_NPA_TEXT)

        # –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        print("\n" + "=" * 80)
        print("–†–ï–ó–£–õ–¨–¢–ê–¢–´ –≠–ö–°–ü–ï–†–¢–ò–ó–´")
        print("=" * 80)

        if report['success']:
            print(f"\n‚úÖ –≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")
            print(f"   –í—Å–µ–≥–æ —ç—Ç–∞–ø–æ–≤: {report['stages_completed']}")
            print(f"   –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å—Ç–∞—Ç–µ–π: {report['total_articles_analyzed']}")

            completeness = report.get('completeness', {})
            print(f"\nüìä –ü–æ–ª–Ω–æ—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:")
            print(f"   –í—Å–µ–≥–æ —Å—Ç–∞—Ç–µ–π: {completeness.get('total_articles', 0)}")
            print(f"   –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: {completeness.get('analyzed_articles', 0)}")
            print(f"   –ü—Ä–æ–ø—É—â–µ–Ω–æ: {completeness.get('missing_articles', 0)}")
            print(f"   –ó–∞–≤–µ—Ä—à—ë–Ω–Ω–æ—Å—Ç—å: {completeness.get('completion_percentage', '0%')}")

            if completeness.get('is_complete'):
                print("\n‚úÖ –ê–ù–ê–õ–ò–ó –ü–û–õ–ù–´–ô - –≤—Å–µ —Å—Ç–∞—Ç—å–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã")
            else:
                print(f"\n‚ö†Ô∏è  –ê–ù–ê–õ–ò–ó –ù–ï–ü–û–õ–ù–´–ô - –ø—Ä–æ–ø—É—â–µ–Ω—ã —Å—Ç–∞—Ç—å–∏: {completeness.get('missing_article_numbers', [])}")

            print(f"\nüìÑ –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ report")

        else:
            print(f"\n‚ùå –≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Å –æ—à–∏–±–∫–∞–º–∏")
            print(f"   –û—à–∏–±–∫–∞: {report.get('error', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞')}")

    except Exception as e:
        print(f"\n‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}")
        import traceback
        traceback.print_exc()


def demonstrate_structure_only():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ API."""
    print("\nüìã –°–¢–†–£–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´ –ü–†–ê–í–û–í–û–ô –≠–ö–°–ü–ï–†–¢–ò–ó–´:\n")

    print("1Ô∏è‚É£  –ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∞:")
    print("   ‚îî‚îÄ NPADocumentParser —Ä–∞–∑–±–∏–≤–∞–µ—Ç –ù–ü–ê –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã")
    print("   ‚îî‚îÄ –°–æ–∑–¥–∞—ë—Ç—Å—è –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ-—á–µ–∫–ª–∏—Å—Ç –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–æ–ª–Ω–æ—Ç—ã\n")

    print("2Ô∏è‚É£  –®–µ—Å—Ç—å —ç—Ç–∞–ø–æ–≤ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ):\n")

    stages = [
        ("–§–∏–ª—å—Ç—Ä –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏", "–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∞"),
        ("–§–∏–ª—å—Ç—Ä –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–æ–Ω–Ω–æ—Å—Ç–∏", "–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–∏ –†–ö"),
        ("–§–∏–ª—å—Ç—Ä –°–∏—Å—Ç–µ–º–Ω–æ–π –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏", "–í—ã—è–≤–ª—è–µ—Ç –∫–æ–ª–ª–∏–∑–∏–∏ —Å –¥–µ–π—Å—Ç–≤—É—é—â–∏–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º"),
        ("–Æ—Ä–∏–¥–∏–∫–æ-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞", "–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π —Ç–µ—Ö–Ω–∏–∫–∏"),
        ("–ê–Ω—Ç–∏–∫–æ—Ä—Ä—É–ø—Ü–∏–æ–Ω–Ω–∞—è –≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞", "–í—ã—è–≤–ª—è–µ—Ç –∫–æ—Ä—Ä—É–ø—Ü–∏–æ–≥–µ–Ω–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã"),
        ("–ì–µ–Ω–¥–µ—Ä–Ω–∞—è –≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞", "–û—Ü–µ–Ω–∏–≤–∞–µ—Ç –≥–µ–Ω–¥–µ—Ä–Ω–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ")
    ]

    for i, (name, description) in enumerate(stages, 1):
        print(f"   {i}. {name}")
        print(f"      {description}")
        print(f"      –ú–æ–¥–µ–ª—å: Claude Sonnet 4.5 (–∞–Ω–∞–ª–∏–∑ –∏ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è)")
        print()

    print("3Ô∏è‚É£  –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Ç—ã:")
    print("   ‚îî‚îÄ CompletenessValidator –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –≤—Å–µ —Å—Ç–∞—Ç—å–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã")
    print("   ‚îî‚îÄ –ï—Å–ª–∏ —Å—Ç–∞—Ç—å–∏ –ø—Ä–æ–ø—É—â–µ–Ω—ã - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç\n")

    print("4Ô∏è‚É£  –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞:")
    print("   ‚îî‚îÄ –ú–æ–¥–µ–ª—å: GPT-4.1 (—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è)")
    print("   ‚îî‚îÄ –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç —Å–æ –≤—Å–µ–º–∏ –Ω–∞—Ö–æ–¥–∫–∞–º–∏\n")

    print("üéØ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –°–ò–°–¢–ï–ú–´:\n")
    print("   ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—è –ø–æ–ª–Ω–æ—Ç—ã - –Ω–∏ –æ–¥–Ω–∞ —Å—Ç–∞—Ç—å—è –Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–∞")
    print("   ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –ø–æ–¥ –∫–∞–∂–¥—ã–π —Ç–∏–ø –∞–Ω–∞–ª–∏–∑–∞")
    print("   ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ Gemini (1M+ —Ç–æ–∫–µ–Ω–æ–≤)")
    print("   ‚úÖ –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ Claude (64K –≤—ã–≤–æ–¥)")
    print("   ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏")
    print()


def example_selective_expertise():
    """–ü—Ä–∏–º–µ—Ä –≤—ã–±–æ—Ä–æ—á–Ω–æ–π —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã (—Ç–æ–ª—å–∫–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —ç—Ç–∞–ø—ã)."""
    print("\n" + "=" * 80)
    print("–ü–†–ò–ú–ï–†: –í–´–ë–û–†–û–ß–ù–ê–Ø –≠–ö–°–ü–ï–†–¢–ò–ó–ê (—Ç–æ–ª—å–∫–æ –∞–Ω—Ç–∏–∫–æ—Ä—Ä—É–ø—Ü–∏–æ–Ω–Ω–∞—è + –≥–µ–Ω–¥–µ—Ä–Ω–∞—è)")
    print("=" * 80)

    # –°–æ–∑–¥–∞—ë–º pipeline
    pipeline = LegalExpertisePipeline()

    # –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã
    skip_stages = [
        "–§–∏–ª—å—Ç—Ä –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏",
        "–§–∏–ª—å—Ç—Ä –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–æ–Ω–Ω–æ—Å—Ç–∏",
        "–§–∏–ª—å—Ç—Ä –°–∏—Å—Ç–µ–º–Ω–æ–π –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏",
        "–Æ—Ä–∏–¥–∏–∫–æ-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞"
    ]

    print(f"\n‚è≠Ô∏è  –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–∞–ø—ã: {', '.join(skip_stages)}")
    print(f"‚úÖ –í—ã–ø–æ–ª–Ω—è–µ–º —Ç–æ–ª—å–∫–æ: –ê–Ω—Ç–∏–∫–æ—Ä—Ä—É–ø—Ü–∏–æ–Ω–Ω–∞—è + –ì–µ–Ω–¥–µ—Ä–Ω–∞—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞\n")

    try:
        report = pipeline.conduct_full_expertise(
            SAMPLE_NPA_TEXT,
            skip_stages=skip_stages
        )

        print(f"\n‚úÖ –í—ã–±–æ—Ä–æ—á–Ω–∞—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞")
        print(f"   –í—ã–ø–æ–ª–Ω–µ–Ω–æ —ç—Ç–∞–ø–æ–≤: {report['stages_completed']}")

    except Exception as e:
        print(f"\n‚ùå –û—à–∏–±–∫–∞: {e}")


def main():
    """–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–∏–º–µ—Ä–æ–≤."""
    print("\n")
    print("‚ïî" + "=" * 78 + "‚ïó")
    print("‚ïë" + " " * 15 + "–°–ò–°–¢–ï–ú–ê –ü–†–ê–í–û–í–û–ô –≠–ö–°–ü–ï–†–¢–ò–ó–´ –ù–ü–ê –†–ö" + " " * 29 + "‚ïë")
    print("‚ïë" + " " * 20 + "LegalTechKZ Legal Expertise System" + " " * 24 + "‚ïë")
    print("‚ïö" + "=" * 78 + "‚ïù")

    try:
        # –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–º–µ—Ä
        example_full_expertise()

        # –ü—Ä–∏–º–µ—Ä –≤—ã–±–æ—Ä–æ—á–Ω–æ–π —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã
        # example_selective_expertise()

        print("\n‚úÖ –ü—Ä–∏–º–µ—Ä—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!\n")

    except KeyboardInterrupt:
        print("\n\n‚ö†Ô∏è  –ü—Ä–µ—Ä–≤–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º")
    except Exception as e:
        print(f"\n\n‚ùå –û—à–∏–±–∫–∞: {e}")
        import traceback
        traceback.print_exc()


if __name__ == "__main__":
    main()
